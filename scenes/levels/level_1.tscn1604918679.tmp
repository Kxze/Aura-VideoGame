[gd_scene load_steps=18 format=3 uid="uid://t2m7hqcpi1rb"]

[ext_resource type="Script" uid="uid://d3qhy6pdpv0jb" path="res://script/Levels/level_1.gd" id="1_s8va5"]
[ext_resource type="Texture2D" uid="uid://bypn6viaeqnwq" path="res://Art/Assets2D/ventanaMask.jpeg" id="2_dga24"]
[ext_resource type="PackedScene" uid="uid://d30vdm7b5ol13" path="res://scenes/playerScene.tscn" id="3_qxy0u"]
[ext_resource type="Script" uid="uid://cfdldafq50ydp" path="res://scenes/CameraFollow.gd" id="4_excbq"]
[ext_resource type="PackedScene" uid="uid://cwdq3ki6diy6s" path="res://scenes/kill_zone.tscn" id="5_iav0o"]
[ext_resource type="PackedScene" uid="uid://bdfat0fcg3hs" path="res://Art/Levels/blocking.blend" id="6_dnkej"]
[ext_resource type="Material" uid="uid://cchvhub8830n6" path="res://Materials/emissive.tres" id="7_mm8aj"]
[ext_resource type="Script" uid="uid://dxdqpv3f7bw65" path="res://script/Triggers/Puerta_logic.gd" id="8_wtwp4"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_2os1m"]
sky_horizon_color = Color(0.634176, 0.719769, 0.942048, 1)
sky_curve = 0.184672
ground_bottom_color = Color(0.134724, 0.123595, 0.39947, 1)

[sub_resource type="Sky" id="Sky_s8va5"]
sky_material = SubResource("ProceduralSkyMaterial_2os1m")

[sub_resource type="Environment" id="Environment_7gny6"]
background_mode = 1
sky = SubResource("Sky_s8va5")
ambient_light_source = 3
ambient_light_sky_contribution = 0.7
tonemap_mode = 2
glow_enabled = true
glow_normalized = true
glow_intensity = 3.48
glow_strength = 0.69
glow_blend_mode = 1
glow_hdr_threshold = 0.0
fog_mode = 1
fog_light_color = Color(0.403922, 0.419608, 0.741176, 1)
fog_light_energy = 0.83
fog_density = 0.0
fog_height = -10.0
fog_height_density = 1.0
fog_depth_curve = 0.554783
fog_depth_begin = 1231.1
fog_depth_end = 1652.1
volumetric_fog_enabled = true
volumetric_fog_density = 0.015
volumetric_fog_albedo = Color(0.54, 0.647333, 1, 1)
volumetric_fog_emission = Color(0.389797, 0.254375, 0.733103, 1)
volumetric_fog_emission_energy = 0.1
volumetric_fog_detail_spread = 1.27456
adjustment_enabled = true
adjustment_saturation = 1.42

[sub_resource type="QuadMesh" id="QuadMesh_2y5yt"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_2os1m"]
albedo_color = Color(0.549832, 0.530188, 0.723751, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_pa8r4"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_5xbjy"]
albedo_color = Color(0.543038, 0.650172, 0.801913, 1)
metallic = 1.0
metallic_specular = 1.0
roughness = 0.24

[sub_resource type="BoxMesh" id="BoxMesh_5xbjy"]

[sub_resource type="BoxShape3D" id="BoxShape3D_2y5yt"]
size = Vector3(9.62585, 29.6842, 17.8096)

[node name="level1" type="Node3D"]
script = ExtResource("1_s8va5")

[node name="Ventana" type="SpotLight3D" parent="."]
transform = Transform3D(-1, -2.23517e-08, 2.98023e-08, -5.75881e-08, 0.866025, 0.5, -8.9407e-08, 0.5, -0.866025, 34, 54.1966, -84.1008)
light_color = Color(0.79152, 0.7372, 0.97, 1)
light_energy = 15.0
light_volumetric_fog_energy = 2.0
light_projector = ExtResource("2_dga24")
shadow_enabled = true
shadow_reverse_cull_face = true
shadow_opacity = 0.0
spot_range = 150.924
spot_attenuation = 0.39
spot_angle = 29.69

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_7gny6")

[node name="Player" parent="." instance=ExtResource("3_qxy0u")]
transform = Transform3D(5, 0, 0, 0, 5, 0, 0, 0, 5, 237.362, 4.48207, 0)

[node name="SpotLight3D" type="SpotLight3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.157528, 1.73671, 1.35148)
light_color = Color(1, 0.969167, 0.63, 1)
light_energy = 3.0
light_specular = 0.0
spot_range = 13.139
spot_angle = 69.14

[node name="Camera3D" type="Camera3D" parent="Player" node_paths=PackedStringArray("target")]
transform = Transform3D(0.2, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.593994, 1.101, 6.303)
keep_aspect = 0
fov = 80.0
script = ExtResource("4_excbq")
target = NodePath("..")
follow_speed = 12.0
offset = Vector3(2.97, 5.505, 31.515)

[node name="SpawnPoint" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14.1689, -0.044652, 0.020874)

[node name="KillZone" parent="." node_paths=PackedStringArray("spawnPoint") instance=ExtResource("5_iav0o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -12.5948, 0)
collision_layer = 4
spawnPoint = NodePath("../SpawnPoint")

[node name="CollisionShape3D" parent="KillZone" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 110.017, 0, 0)

[node name="blocking" parent="." instance=ExtResource("6_dnkej")]

[node name="castillo" parent="blocking" index="0"]
transform = Transform3D(34.7736, 0, 0, 0, 0, -3.08322, 0, 10.3619, 0, 240.85, -3.76223, -15.5995)

[node name="StaticBody3D" parent="blocking/castillo" index="0"]
collision_layer = 2

[node name="Libros" parent="blocking" index="1"]
transform = Transform3D(-3.318, -23.7281, 1.03719e-06, 0, -1.04728e-06, -23.959, 23.7281, -3.318, 1.45034e-07, 27.2169, -8.69375, -3.70119)

[node name="StaticBody3D" parent="blocking/Libros" index="0"]
collision_layer = 2

[node name="Escritorio" parent="blocking" index="2"]
transform = Transform3D(3.49891, 0, 0, 0, 0, -57.7868, 0, 52.6347, 0, 80.0444, 10.0139, -26.8209)

[node name="StaticBody3D" parent="blocking/Escritorio" index="0"]
collision_layer = 2

[node name="silla" parent="blocking" index="3"]
transform = Transform3D(24.3268, 0, 0, 0, 0, -1.9136, 0, 24.3268, 0, 193.234, -11.5981, -3.82187)

[node name="StaticBody3D" parent="blocking/silla" index="0"]
collision_layer = 2

[node name="StaticBody3D" parent="blocking/cama" index="0"]
collision_layer = 2

[node name="techo" type="MeshInstance3D" parent="."]
transform = Transform3D(400, 0, 0, 0, -7.01598e-06, -161.362, 0, 160.507, -7.05336e-06, 84.2484, 85.8299, -20.9604)
mesh = SubResource("QuadMesh_2y5yt")
surface_material_override/0 = SubResource("StandardMaterial3D_2os1m")

[node name="techo4" type="MeshInstance3D" parent="."]
transform = Transform3D(-1.74846e-05, -2.1048e-05, -161.362, 400, 1.36091e-12, -7.05336e-06, 0, -160.507, 2.11601e-05, 282.9, -80.354, -21)
mesh = SubResource("QuadMesh_2y5yt")
surface_material_override/0 = SubResource("StandardMaterial3D_2os1m")

[node name="serie" type="Node" parent="."]

[node name="luces" type="OmniLight3D" parent="serie"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 134.233, 33.4103, -35.113)
light_color = Color(0.614926, 0.483765, 3.85046e-07, 1)
light_energy = 97.165
light_indirect_energy = 5.638
light_volumetric_fog_energy = 4.419
omni_range = 34.697
omni_attenuation = 1.606

[node name="luces2" type="OmniLight3D" parent="serie"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 225.233, 34.3929, -34.113)
light_color = Color(0.614926, 0.483765, 3.85046e-07, 1)
light_energy = 97.165
light_indirect_energy = 5.638
light_volumetric_fog_energy = 4.419
omni_range = 34.697
omni_attenuation = 1.606

[node name="luces3" type="OmniLight3D" parent="serie"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 93.2333, 30.3929, -63.113)
light_color = Color(0.614926, 0.483765, 3.85046e-07, 1)
light_energy = 97.165
light_indirect_energy = 5.638
light_volumetric_fog_energy = 4.419
omni_range = 34.697
omni_attenuation = 1.606

[node name="luces4" type="OmniLight3D" parent="serie"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 15.2333, 47.3929, -23.113)
light_color = Color(0.614926, 0.483765, 3.85046e-07, 1)
light_energy = 97.165
light_indirect_energy = 5.638
light_volumetric_fog_energy = 4.419
omni_range = 34.697
omni_attenuation = 1.606

[node name="luces5" type="OmniLight3D" parent="serie"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 30.2333, 44.3929, -40.113)
light_color = Color(0.614926, 0.483765, 3.85046e-07, 1)
light_energy = 97.165
light_indirect_energy = 5.638
light_volumetric_fog_energy = 4.419
omni_range = 34.697
omni_attenuation = 1.606

[node name="luces6" type="OmniLight3D" parent="serie"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 45.2333, 49.3929, -54.113)
light_color = Color(0.614926, 0.483765, 3.85046e-07, 1)
light_energy = 97.165
light_indirect_energy = 5.638
light_volumetric_fog_energy = 4.419
omni_range = 34.697
omni_attenuation = 1.606

[node name="luces7" type="OmniLight3D" parent="serie"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 77.2333, 47.3929, -72.113)
light_color = Color(0.614926, 0.483765, 3.85046e-07, 1)
light_energy = 97.165
light_indirect_energy = 5.638
light_volumetric_fog_energy = 4.419
omni_range = 34.697
omni_attenuation = 1.606

[node name="luces8" type="OmniLight3D" parent="serie"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 111.233, 28.3929, -55.113)
light_color = Color(0.614926, 0.483765, 3.85046e-07, 1)
light_energy = 97.165
light_indirect_energy = 5.638
light_volumetric_fog_energy = 4.419
omni_range = 34.697
omni_attenuation = 1.606

[node name="luces9" type="OmniLight3D" parent="serie"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 123.233, 29.3929, -50.113)
light_color = Color(0.614926, 0.483765, 3.85046e-07, 1)
light_energy = 97.165
light_indirect_energy = 5.638
light_volumetric_fog_energy = 4.419
omni_range = 34.697
omni_attenuation = 1.606

[node name="luces10" type="OmniLight3D" parent="serie"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 162.233, 38.3929, -33.113)
light_color = Color(0.614926, 0.483765, 3.85046e-07, 1)
light_energy = 97.165
light_indirect_energy = 5.638
light_volumetric_fog_energy = 4.419
omni_range = 34.697
omni_attenuation = 1.606

[node name="luces11" type="OmniLight3D" parent="serie"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 136.233, 28.3929, -44.113)
light_color = Color(0.614926, 0.483765, 3.85046e-07, 1)
light_energy = 97.165
light_indirect_energy = 5.638
light_volumetric_fog_energy = 4.419
omni_range = 34.697
omni_attenuation = 1.606

[node name="luces12" type="OmniLight3D" parent="serie"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 149.233, 50.3929, -53.113)
light_color = Color(0.574729, 0.476048, 0.452437, 1)
light_energy = 97.165
light_indirect_energy = 5.638
light_volumetric_fog_energy = 4.419
omni_range = 66.245

[node name="luna" type="SpotLight3D" parent="."]
transform = Transform3D(1, 3.29216e-05, 0.000156656, -0.000145623, 0.593479, 0.80485, -6.64751e-05, -0.80485, 0.593479, 33.6887, 237.178, -95.5997)
light_color = Color(0.745098, 0.752941, 0.972549, 1)
light_energy = 1000.0
spot_range = 280.096

[node name="Portal" type="MeshInstance3D" parent="."]
transform = Transform3D(-1.09104e-06, -2.18002, 0, 24.96, -9.52919e-08, 0, 0, 0, 22.6106, 257.789, 23.3196, -13.0133)
material_override = ExtResource("7_mm8aj")
mesh = SubResource("PlaneMesh_pa8r4")
skeleton = NodePath("../MeshInstance3D")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(86.3587, 0, 0, 0, -1.25549e-08, -75.995, 0, 0.287223, -3.32185e-06, 35.7886, 42.3196, -90.3133)
material_override = SubResource("StandardMaterial3D_5xbjy")
transparency = 0.65
mesh = SubResource("BoxMesh_5xbjy")

[node name="SpotLight3D" type="SpotLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 69, 21.6618, 71)
visible = false
light_color = Color(0.82, 0.581927, 0.2706, 1)
light_energy = 200.0
spot_range = 137.547
spot_angle = 78.92

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.7424, 0.656973, -0.131257, 0.495307, -0.406303, 0.767846, 0.451124, -0.635062, -0.627043, 41, 43, -89)
light_energy = 0.1
shadow_enabled = true
shadow_bias = 0.0
sky_mode = 1

[node name="Puerta" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 254.933, 5.62455, 2.30186)
script = ExtResource("8_wtwp4")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Puerta"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.31293, 14.3421, -8.40479)
shape = SubResource("BoxShape3D_2y5yt")

[connection signal="change_level" from="Puerta" to="." method="_on_puerta_change_level"]

[editable path="KillZone"]
[editable path="blocking"]
